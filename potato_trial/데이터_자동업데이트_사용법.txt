================================================================================
                    데이터 자동 업데이트 사용법
================================================================================

📁 파일: auto_update_data.py


================================================================================
1️⃣  새 데이터 추가하기
================================================================================

새로운 주식 데이터를 추가하면 자동으로 모든 전처리가 실행됩니다.

명령어:
    python auto_update_data.py --add-data "새데이터파일.parquet"

예시:
    python auto_update_data.py --add-data "database/january_2025_data.parquet"

실행 과정:
    1. 데이터 검증 (필수 컬럼, 날짜 형식 체크)
    2. 기존 데이터 백업 생성
    3. 새 데이터 병합 및 중복 제거
    4. Tier 1 기술적 지표 재계산
    5. Tier 2 회계 지표 재계산
    6. Tier 3 매크로 지표 재계산
    7. 백테스트 데이터 재계산


================================================================================
2️⃣  자동 감시 모드 (추천!)
================================================================================

백그라운드에서 실행하면 파일 변경을 자동 감지하고 전처리를 실행합니다.

명령어:
    python auto_update_data.py --watch

사용 방법:
    1. 위 명령어 실행 (터미널 창 하나 띄워놓기)
    2. 평소처럼 final_stock_daily.parquet 파일 수정
    3. 자동으로 전처리 시작! ✨
    4. 종료하려면 Ctrl+C

감시 간격 조정:
    python auto_update_data.py --watch --interval 30  # 30초마다 체크


================================================================================
3️⃣  전처리만 다시 실행
================================================================================

데이터는 그대로 두고 전처리만 다시 실행합니다.

명령어:
    python auto_update_data.py --reprocess

사용 시기:
    - 전처리 코드를 수정한 후
    - 에러로 인해 전처리가 중단된 경우
    - 특정 지표만 다시 계산하고 싶을 때


================================================================================
4️⃣  현재 데이터 상태 확인
================================================================================

데이터의 현재 상태를 빠르게 확인합니다.

명령어:
    python auto_update_data.py --status

출력 예시:
    현재 데이터 상태:

    일별 주식 데이터 (final_stock_daily.parquet):
      총 행수: 2,345,678
      기간: 2020-01-02 ~ 2025-01-31
      거래일: 1,256개
      종목수: 503개


================================================================================
📝 새 데이터 파일 준비 방법
================================================================================

새 데이터 파일은 다음 컬럼을 포함해야 합니다:

필수 컬럼:
    - DlyCalDt: 날짜 (YYYY-MM-DD 형식)
    - PERMNO: 종목 번호
    - RET: 수익률
    - gsector: GICS 섹터 코드

예시 Python 코드:

    import pandas as pd

    # 새 데이터 생성
    new_data = pd.DataFrame({
        'DlyCalDt': ['2025-01-02', '2025-01-03', ...],
        'PERMNO': [10001, 10001, ...],
        'RET': [0.015, -0.008, ...],
        'gsector': [45, 45, ...],
        # 기타 컬럼들...
    })

    # Parquet 형식으로 저장
    new_data.to_parquet('database/january_2025.parquet', index=False)

    # 자동 업데이트 실행
    # python auto_update_data.py --add-data "database/january_2025.parquet"


================================================================================
⚙️  고급 옵션
================================================================================

백업 생성 안함:
    python auto_update_data.py --add-data "new.parquet" --no-backup

    주의: 백업 없이 진행하므로 데이터 손실 위험 있음


================================================================================
🔄 일상적인 사용 워크플로우
================================================================================

[방법 1] 감시 모드 사용 (가장 편함)
    1. 처음 한 번만: python auto_update_data.py --watch
    2. 터미널 창을 백그라운드에 띄워놓기
    3. 평소처럼 데이터 파일 수정
    4. 자동으로 전처리 실행됨!

[방법 2] 수동 실행
    1. 새 데이터 준비: new_data.parquet
    2. 명령 실행: python auto_update_data.py --add-data "new_data.parquet"
    3. 완료!


================================================================================
🐛 문제 해결
================================================================================

문제: "필수 컬럼 누락" 오류
해결: 새 데이터 파일에 DlyCalDt, PERMNO, RET, gsector 컬럼이 있는지 확인

문제: "파일을 찾을 수 없습니다" 오류
해결: 파일 경로를 절대 경로로 지정
      예) python auto_update_data.py --add-data "C:\Users\...\new_data.parquet"

문제: 전처리가 실패함
해결: python auto_update_data.py --reprocess 명령으로 다시 시도

문제: 감시 모드가 변경을 감지 안함
해결: 파일을 저장한 후 1분 정도 기다려보기


================================================================================
📞 도움말
================================================================================

전체 옵션 보기:
    python auto_update_data.py --help


끝!
